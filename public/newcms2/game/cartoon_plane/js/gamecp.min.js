window.YHCPSDK=function(w,d){var ua=navigator.userAgent,nativeType=0,loginRespAll=!1;/YJS_H5_Android/.test(ua)?(nativeType=1,/RH_RESP_ALL/.test(ua)&&(loginRespAll=!0)):/BJS_H5_Android/.test(ua)?nativeType=2:/YKT_I6_iOS/.test(ua)?nativeType=3:/BKT_I6_iOS/.test(ua)&&(nativeType=4);var _DELEGATE,_CPINFO={callbackName:!1};function log(format){}function run(m,data){m in _DELEGATE&&_DELEGATE[m](data)}function toObject(data){if((!data||"object"!=typeof data&&"string"!=typeof data)&&(data={}),"string"==typeof data)try{data=JSON.parse(data)}catch(e){data={}}return data}return _DELEGATE=nativeType>0?{init:function(data){var param;switch(nativeType){case 1:case 2:android.onInit(1,data.callbackName);break;case 3:case 4:param=JSON.stringify({orientation:3==nativeType?0:2,callback:data.callbackName}),setTimeout(function(){w.webkit.messageHandlers.iOS.postMessage({functionName:"onInit",parameter:param})},1e3)}},getSDKConfigInfo:function(){switch(nativeType){case 1:case 2:android.getSDKConfigInfo();break;case 3:case 4:w.webkit.messageHandlers.iOS.postMessage({functionName:"getSDKConfigInfo"})}},login:function(){switch(nativeType){case 1:case 2:android.onLogin();break;case 3:case 4:w.webkit.messageHandlers.iOS.postMessage({functionName:"onLogin"})}},logout:function(){switch(nativeType){case 1:case 2:android.onLogout();break;case 3:case 4:w.webkit.messageHandlers.iOS.postMessage({functionName:"onLogout"})}},loginRsp:function(resp){var param,content;switch(nativeType){case 1:void 0!==resp.ret?(content=toObject(resp.content)).data=toObject(content.data):content={data:resp},param=JSON.stringify(content.data),loginRespAll&&(param=JSON.stringify(resp)),android.onLoginRsp(param);break;case 2:content=void 0!==resp.ret?toObject(resp.content):resp,param=JSON.stringify(content),android.onLoginRsp(param);break;case 3:(content=toObject(resp.content)).data=toObject(content.data),param=JSON.stringify(content.data),w.webkit.messageHandlers.iOS.postMessage({functionName:"onLoginRsp",parameter:param});break;case 4:param=JSON.stringify(resp),w.webkit.messageHandlers.iOS.postMessage({functionName:"onLoginRsp",parameter:param})}},pay:function(data){switch(2!=nativeType&&4!=nativeType||(delete data.role_level,delete data.vip_level,delete data.server_name,delete data.product_type),nativeType){case 1:case 2:delete data.apple_product_id,android.onPay(JSON.stringify(data));break;case 3:case 4:w.webkit.messageHandlers.iOS.postMessage({functionName:"onPay",parameter:JSON.stringify(data)})}},logRoleCreate:function(data){switch(nativeType){case 1:android.onUploadCreateRole(JSON.stringify(data));break;case 3:w.webkit.messageHandlers.iOS.postMessage({functionName:"onUploadCreateRole",parameter:JSON.stringify(data)})}},logRoleEnter:function(data){switch(2!=nativeType&&4!=nativeType||(data={role_id:data.role_id,role_name:data.role_name,role_level:data.role_level,server_id:data.server_id?data.server_id:data.server}),nativeType){case 1:case 2:android.onLoginRoleInfo(JSON.stringify(data));break;case 3:case 4:w.webkit.messageHandlers.iOS.postMessage({functionName:"onLoginRoleInfo",parameter:JSON.stringify(data)})}},logRoleUp:function(data){switch(2!=nativeType&&4!=nativeType||(data={role_id:data.role_id,role_name:data.role_name,role_level:data.role_level,server_id:data.server_id?data.server_id:data.server}),nativeType){case 1:case 2:android.onUpdateRoleInfo(JSON.stringify(data));break;case 3:case 4:w.webkit.messageHandlers.iOS.postMessage({functionName:"onUpdateRoleInfo",parameter:JSON.stringify(data)})}},logConsume:function(data){switch(nativeType){case 1:android.onBuyItem(JSON.stringify(data.user_info),JSON.stringify(data.order_info));break;case 3:w.webkit.messageHandlers.iOS.postMessage({functionName:"onBuyItem",parameter:JSON.stringify(data)})}},openGameUrl:function(){switch(nativeType){case 1:case 2:android.onOpenGameUrl();break;case 3:case 4:w.webkit.messageHandlers.iOS.postMessage({functionName:"onOpenGameUrl"})}}}:function(){function postTopMessage(action,data){w.parent.postMessage({action:action,data:data||{}},"*")}return w.addEventListener("message",function(event){var action=!1,data={};if(event&&event.data&&(action=event.data.action||!1,data=event.data.data||{}),log("h5sdk-gamecp action=%1,data=%2",action,data),!action)return!1;if(0!=action.indexOf("yhsdk_"))return!1;if("load"==(action=action.substring("yhsdk_".length))){var callbackName=data.callbackName;for(var k in!_CPINFO.callbackName&&callbackName&&(_CPINFO.callbackName=callbackName),delete data.callbackName,data)_CPINFO[k]=data[k]}else w[_CPINFO.callbackName]&&w[_CPINFO.callbackName](action,JSON.stringify(data))},!1),postTopMessage("load"),{init:function(data){_CPINFO.callbackName=data.callbackName,postTopMessage("init",data)},getSDKConfigInfo:function(){var obj=_CPINFO.sdk_info;obj.ret=1,w[_CPINFO.callbackName]("get_sdk_info",JSON.stringify(obj))},login:function(){postTopMessage("login")},loginRsp:function(resp){postTopMessage("loginRsp",resp)},logout:function(){postTopMessage("logout")},pay:function(data){postTopMessage("pay",data)},logRoleCreate:function(data){postTopMessage("ROLE",data)},logRoleEnter:function(data){postTopMessage("GAME",data)},logRoleUp:function(data){postTopMessage("ROLEUPDATE",data)},logConsume:function(data){postTopMessage("CONSUME",data)}}}(),{E_INIT:"init",E_GET_SDK_INFO:"get_sdk_info",E_LOGIN:"login",E_LOGOUT:"logout",E_SWITCH_ACCOUNT:"switch_account",E_LOGIN_REP:"login_rsp",E_LOGIN_RSP:"login_rsp",E_PAY:"pay",init:function(callbackName){run("init",{callbackName:callbackName})},getSDKConfigInfo:function(){run("getSDKConfigInfo")},login:function(){run("login")},loginRsp:function(resp){run("loginRsp",resp=toObject(resp))},logout:function(){run("logout")},pay:function(data){run("pay",toObject(data))},logRoleCreate:function(user){run("logRoleCreate",toObject(user))},logRoleEnter:function(user){run("logRoleEnter",toObject(user))},logRoleUp:function(user){run("logRoleUp",toObject(user))},logConsume:function(user,product){user=toObject(user),(product=toObject(product)).remain_coin=user.remain_coin,run("logConsume",{user_info:user,order_info:product})},_logMsg:log,openGameUrl:function(){run("openGameUrl")}}}(window,document);